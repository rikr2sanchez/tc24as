<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
  <h1 class="h2" *ngIf="mode == 'create'">New Matched Provider</h1>
  <h1 class="h2" *ngIf="mode == 'update'">Update Matched Provider - {{ mp.name }}</h1>
</div>

<div class="row" *ngIf="errorMessage">
  <div class="col-sm-12">
    <p class="alert alert-danger">{{ errorMessage }}</p>
  </div>
</div>

<div *ngIf="!mode && !errorMessage">
  <app-spinner></app-spinner>
</div>

<div *ngIf="mode">
  <div class="row">
    <div class="col-sm-12">
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="card">
          <div class="card-body">
            <div class="form-group-wrapper">
              <div class="form-group row" [ngClass]="{ 'has-danger': !isValid('type') }">
                <label class="col-sm-12" for="type">Type<span class="required">*</span></label>
                <div class="col-sm-8">
                  <input
                    type="text"
                    class="form-control"
                    id="type"
                    placeholder="Enter type"
                    formControlName="type"
                    [ngClass]="{ 'form-control-danger': !isValid('type') }"
                  />
                </div>
                <div class="clearfix"></div>
                <div class="col-sm-12" *ngIf="!formErrors.type.valid">
                  <span class="help-block help-block-error">{{ formErrors.type.message }}</span>
                </div>
                <div class="col-sm-12">
                  <span class="form-text text-muted"
                  >Type only allows two int between 0 and 3 separated by a comma. i.e.
                     0,2 or 1,3 </span
                  >
                </div>
              </div>
            </div>
            <div class="form-group-wrapper">
              <div class="form-group row" [ngClass]="{ 'has-danger': !isValid('name') }">
                <label class="col-sm-12" for="name">Full Name<span class="required">*</span></label>
                <div class="col-sm-8">
                  <input
                    type="text"
                    class="form-control"
                    id="name"
                    placeholder="Enter name"
                    formControlName="name"
                    [ngClass]="{ 'form-control-danger': !isValid('name') }"
                  />
                </div>
                <div class="clearfix"></div>
                <div class="col-sm-12" *ngIf="!formErrors.name.valid">
                  <span class="help-block help-block-error">{{ formErrors.name.message }}</span>
                </div>
                <div class="col-sm-12">
                  <span class="form-text text-muted"
                    >Name only allows letters. i.e.
                     Juan Perez</span
                  >
                </div>
              </div>
            </div>
            <div class="form-group-wrapper">
              <div class="form-group row" [ngClass]="{ 'has-danger': !isValid('email') }">
                <label class="col-sm-12" for="email">Email Address <span class="required">*</span></label>
                <div class="col-sm-8">
                  <input
                    type="email"
                    class="form-control"
                    id="email"
                    placeholder="Enter email address"
                    formControlName="email"
                    [ngClass]="{ 'form-control-danger': !isValid('email') }"
                  />
                </div>
                <div class="clearfix"></div>
                <div class="col-sm-12" *ngIf="!formErrors.email.valid">
                  <span class="help-block help-block-error">{{ formErrors.email.message }}</span>
                </div>
                <div class="col-sm-12">
                  <span class="form-text text-muted">Email must be valid email address. i.e. sample@username.com.</span>
                </div>
              </div>
            </div>
            <div class="form-group-wrapper">
              <div class="form-group row" [ngClass]="{ 'has-danger': !isValid('phone') }">
                <label class="col-sm-12" for="phone">Phone Number <span class="required">*</span></label>
                <div class="col-sm-8">
                  <input
                    type="phone"
                    class="form-control"
                    id="phone"
                    placeholder="Enter phone number"
                    formControlName="phone"
                    [ngClass]="{ 'form-control-danger': !isValid('phone') }"
                  />
                </div>
                <div class="clearfix"></div>
                <div class="col-sm-12" *ngIf="!formErrors.phone.valid">
                  <span class="help-block help-block-error">{{ formErrors.phone.message }}</span>
                </div>
                <div class="col-sm-12">
                  <span class="form-text text-muted">Phone can only contain numeric characters and symbols +-</span>
                </div>
              </div>
            </div>
            <div class="form-group-wrapper">
              <div class="form-group row" [ngClass]="{ 'has-danger': !isValid('_ID') }">
                <label class="col-sm-12" for="_ID">ID<span class="required">*</span></label>
                <div class="col-sm-8">
                  <input
                    type="text"
                    class="form-control"
                    id="_ID"
                    placeholder="Enter ID"
                    formControlName="_ID"
                    [ngClass]="{ 'form-control-danger': !isValid('_ID') }"
                  />
                </div>
                <div class="clearfix"></div>
                <div class="col-sm-12" *ngIf="!formErrors._ID.valid">
                  <span class="help-block help-block-error">{{ formErrors._ID.message }}</span>
                </div>
                <div class="col-sm-12">
                  <span class="form-text text-muted">i.e. 1472</span>
                </div>
              </div>
            </div>
            <div class="form-group-wrapper">
              <div class="form-group row" [ngClass]="{ 'has-danger': !isValid('status') }">
                <label class="col-sm-12" for="status">Status <span class="required">*</span></label>
                <div class="col-sm-8">
                  <input
                    type="email"
                    class="form-control"
                    id="status"
                    placeholder="Enter status"
                    formControlName="status"
                    [ngClass]="{ 'form-control-danger': !isValid('status') }"
                  />
                </div>
                <div class="clearfix"></div>
                <div class="col-sm-12" *ngIf="!formErrors.status.valid">
                  <span class="help-block help-block-error">{{ formErrors.status.message }}</span>
                </div>
                <div class="col-sm-12">
                  <span class="form-text text-muted">Status only allows int between 0 and 4  </span>
                </div>
              </div>
            </div>

          </div>
          <div class="card-footer">
            <div class="row">
              <div class="col-sm-6">
                <button type="submit" class="btn btn-primary" [disabled]="!form.valid || submitted == true">
                  <i class="fa fa-dot-circle-o"></i>
                  Save
                  <app-spinner *ngIf="submitted"></app-spinner>
                </button>
              </div>
              <div class="col-sm-6 text-right">
                <a [routerLink]="['/matched-provider']" class="btn btn-warning"><i class="fa fa-arrow-left"></i> Back to list</a>
              </div>
              <div *ngIf="errorMessage" class="col-xs-12 error-block mt-h">
                <div class="alert alert-danger">{{ errorMessage }}</div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
